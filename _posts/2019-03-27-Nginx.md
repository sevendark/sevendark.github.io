---
title: "åœ¨Ubuntuä¸Šå®‰è£…Nginx"
categories:
  - Tec
tags:
  - Nginx
toc: true
header:
  teaser: /assets/blog_images/nginx.png
---
nginx çš„å®‰è£…, æ—¥å¿—æ–‡ä»¶ã€é…ç½®æ–‡ä»¶è·¯å¾„, ç«¯å£è½¬å‘é…ç½®ï¼Œå¯åŠ¨å‘½ä»¤ç­‰ã€‚

## å®‰è£…

å®‰è£…ä¾èµ–åŒ…
```sh
   sudo apt install curl gnupg2 ca-certificates lsb-release
```

è®¾ç½®nginxä»“åº“
```sh
   echo "deb http://nginx.org/packages/ubuntu `lsb_release -cs` nginx" \
    | sudo tee /etc/apt/sources.list.d/nginx.list
```

æ·»åŠ ç­¾å
```sh
   curl -fsSL https://nginx.org/keys/nginx_signing.key | sudo apt-key add 
```

ç­¾åæ ¡éªŒï¼Œè¾“å‡ºåº”è¯¥åŒ…å«ï¼š`573B FD6B 3D8F BC64 1079 A6AB ABF5 BD82 7BD9 BF62`
```sh
   sudo apt-key fingerprint ABF5BD827BD9BF62
```

å®‰è£…nginx
```sh
   sudo apt update
   sudo apt install nginx
```

## æ–‡ä»¶è·¯å¾„

### log file
error.log and access.log
- `/usr/local/nginx/logs`
- `/var/log/nginx`

### pid file
nginx.pid
- `/var/local/nginx/logs`
- `/var/run`

### é…ç½®æ–‡ä»¶
nginx.conf
- `/user/local/nginx/conf`
- `/etc/nginx`
- `/usr/local/etc/nginx`

#### é…ç½®
é…ç½®ç«¯å£è½¬å‘ä¸SSL
```
server {

     listen 443;

     server_name www.sevendark.cn;
     ssl on;
     ssl_certificate conf.d/Nginx/1_www.sevendark.cn_bundle.crt;
     ssl_certificate_key conf.d/Nginx/2_www.sevendark.cn.key;
     ssl_session_timeout 5m;
     ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
     ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
     ssl_prefer_server_ciphers on;

     location / {
         root   /usr/share/nginx/html;
         index  index.html index.htm;
     }

     location /km {
         proxy_pass http://127.0.0.1:8080/km;
     }

     error_page   500 502 503 504  /50x.html;
     location = /50x.html {
         root   /usr/share/nginx/html;
     }
 }
```
é…ç½®80è½¬å‘443
```
server {
    listen 80;
    server_name www.sevendark.cn;
    location / {
        rewrite ^ https://$host$request_uri? permanent;
    }
}
```

## å‘½ä»¤

```sh
nginx -s reload
nginx -s quit

sudo service nginx start
sudo service nginx stop
sudo service nginx restart
```

## æ–‡æ¡£
ğŸ”¶ [nginx install doc](http://nginx.org/en/linux_packages.html)
